##渲染引擎
渲染引擎的职责是，恩。。渲染，意味着在浏览器窗口上展示请求的内容。
默认情况下渲染引擎能展示HTML、XML文件和图片。通过插件（浏览器拓展）也可以展示其他类型。一个例子是通过PDF预览插件展示PDF文件。我们会在另外的章节讨论插件和拓展。在本章节我们专注于通过css样式控制来展示的html和图片。

###渲染引擎
我们提及的浏览器-Firefox、Chrome、Safari是基于两种渲染引擎的，Firefox使用`Fecko` - 火狐自家的渲染器。Safari和Chrome都是使用`webkit`.webkit作为一个开源的渲染引擎，用在Linux平台，也被苹果公司修改使用在Mac和windows上。查看更多信息 http://webkit.org/。

###主要的流程
渲染引擎开始于得到请求文档的内容，&&&this will usually be done in 8k chunks。

自那以后，下面这幅图片就是渲染引擎的基础工作流。
![flow](../images/flow.png)

- 解析HTML去构建DOM树
- 渲染树构建
- 渲染树布局
- 绘制渲染树

渲染引擎开始解析得到的HTML文档，把tags标志&&&转变为DOM节点挂在一颗叫`内容树content tree`&&&上。这个过程会解析样式的信息，包括外加的css文件和内嵌的style属性。样式的信息跟html中视觉的指令合起来用来创建另一颗树-
`render tree 渲染树` &&&

render tree渲染树包含了一系列带着视觉上属性（颜色、大小）的长方块。这些长方块按顺序被展示在屏幕上。

渲染树构建好以后就进入`布局layout`阶段了。这意味着该给每个节点设置显示在屏幕上的正确坐标了。下一个阶段是`painting 绘制`。渲染树render tree将被遍历然后每个机电会通过UI backend layer绘制在屏幕上。

理解这些过程是很缓和逐渐的是很重要的，为了更好的用户体验，渲染引擎rendering engine 会尽可能快的讲内容展示在屏幕上，它不会等待所有的HTML都被解析完才去构建渲染树和布局，一部分内容会先被解析和展示，而这个过程（上述的1234）会一直持续，随着源源不断来自网络的内容。

![webkit flow](../images/webkitflow.png)
![webkit flow](../images/Geokoflow.jpg)

从上面的两幅图比较就可以看出`webkit`跟`Geoko`有一些术语上的区别，整个流程基本上是一致的。Geoko把样式格式化后的元素的tree定义为 - `Frame tree 结构树`，每一个元素是一个结构frame ，webkit使用render tree 渲染树的术语，渲染树包含一系列render对象。webkit使用`layout布局`描述元素的位置定位，而Geoko称这为Reflow。`Attachment`是一个webkit术语用来描述结合DOM节点DOM nodes和样式信息去生成rendertree渲染树。一个小的非语义上的不同是Geoko有一个在HTML跟DOMtree之间额外的层-`content sink`,这是个工厂用来制造dom元素。我们会详细的讲解每个过程。

###解析 Parsing

